{% extends 'layout.njk' %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/error-message/macro.njk" import govukErrorMessage %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">Select actions rule</h1>

      <div class="govuk-body">
        <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default">
          {% for item in model.items %}
            <div class="govuk-accordion__section ">
              <div class="govuk-accordion__section-header">
                <h2 class="govuk-accordion__section-heading">
                  <span class="govuk-accordion__section-button" id="accordion-default-heading-1">
                    {{ item.heading }}
                  </span>
                </h2>
              </div>
              <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">
                {{ govukErrorMessage({
                  text: model.errorMessage
                }) }}

                {% for ruleType, rules in item.rules | groupby("type") %}
                  <h3 class="govuk-heading-m">{{ ruleType | title }} rules</h3>
                  {% include "actions-rule-set.njk" %}
                {% endfor %}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  {% endblock %}
